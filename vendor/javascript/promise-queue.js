import e from"process";var n={};var t="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global;var u={};(function(e,n){u&&true?u=n():e.Queue=n()})(u,(function(){var e="undefined"!==typeof Promise?Promise:function(){return{then:function(){throw new Error("Queue.configure() before use Queue")}}};var noop=function(){};var resolveWith=function(n){return n&&"function"===typeof n.then?n:new e((function(e){e(n)}))};function Queue(e,n,u){(this||t).options=u=u||{};(this||t).pendingPromises=0;(this||t).maxPendingPromises="undefined"!==typeof e?e:Infinity;(this||t).maxQueuedPromises="undefined"!==typeof n?n:Infinity;(this||t).queue=[]}Queue.configure=function(n){e=n};Queue.prototype.add=function(n){var u=this||t;return new e((function(e,t,i){if(u.queue.length>=u.maxQueuedPromises)t(new Error("Queue limit reached"));else{u.queue.push({promiseGenerator:n,resolve:e,reject:t,notify:i||noop});u._dequeue()}}))};Queue.prototype.getPendingLength=function(){return(this||t).pendingPromises};Queue.prototype.getQueueLength=function(){return(this||t).queue.length};Queue.prototype._dequeue=function(){var e=this||t;if((this||t).pendingPromises>=(this||t).maxPendingPromises)return false;var n=(this||t).queue.shift();if(!n){(this||t).options.onEmpty&&(this||t).options.onEmpty();return false}try{(this||t).pendingPromises++;resolveWith(n.promiseGenerator()).then((function(t){e.pendingPromises--;n.resolve(t);e._dequeue()}),(function(t){e.pendingPromises--;n.reject(t);e._dequeue()}),(function(e){n.notify(e)}))}catch(t){e.pendingPromises--;n.reject(t);e._dequeue()}return true};return Queue}));var i=u;var r={};var o=e;r=o.env.PROMISE_QUEUE_COVERAGE?n:i;var s=r;export default s;

